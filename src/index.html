<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    <?= config.emailFromName ?>
  </title>
  <?!= include('style'); ?>
</head>

<body>
  <div class="container">
    <header>
      <h1>
        <?= config.emailFromName ?>
      </h1>
      <p class="subtitle">С┐ЮУГиУђЁсЃ╗ућЪтЙњТЃЁта▒уЎ╗жї▓сЃЋсѓЕсЃ╝сЃа</p>
    </header>

    <main>
      <form id="registrationForm">
        <!-- сЃбсЃ╝сЃЅжЂИТіъ -->
        <section class="form-section">
          <h2>уЎ╗жї▓Тќ╣Т│Ћ</h2>
          <div class="radio-group">
            <label>
              <input type="radio" name="mode" value="new" <?=mode==='new' ? 'checked' : '' ?>>
              Тќ░УдЈуЎ╗жї▓
            </label>
            <label>
              <input type="radio" name="mode" value="edit" <?=mode==='edit' ? 'checked' : '' ?>>
              уЎ╗жї▓тєЁт«╣сѓњуиежЏє
            </label>
          </div>
        </section>

        <!-- уиежЏєУфЇУе╝сѓ╗сѓ»сѓисЃДсЃ│ -->
        <section id="editAuthSection" class="form-section" style="display: none;">
          <h2>уиежЏєУфЇУе╝</h2>
          <div class="form-group">
            <label for="authEmail">сЃАсЃ╝сЃФсѓбсЃЅсЃгсѓ╣ <span class="required">*</span></label>
            <input type="email" id="authEmail" class="form-control" placeholder="СИќтИ»тєЁсЂ«сЂёсЂџсѓїсЂІсЂ«сЃАсЃ╝сЃФсѓбсЃЅсЃгсѓ╣">
            <small class="form-text">С┐ЮУГиУђЁсЃ╗ућЪтЙњсЂ«сЂЕсЂфсЂЪсЂ«сЃАсЃ╝сЃФсѓбсЃЅсЃгсѓ╣сЂДсѓѓуиежЏєсЂДсЂЇсЂЙсЂЎ</small>
          </div>
          <div class="form-group">
            <label for="editCode">уиежЏєсѓ│сЃ╝сЃЅ(С╗╗ТёЈ)</label>
            <input type="text" id="editCode" class="form-control" placeholder="6ТАЂсЂ«УІ▒ТЋ░тГЌ" maxlength="6">
            <small class="form-text">уб║УфЇсЃАсЃ╝сЃФсЂФУеўУ╝ЅсЂЋсѓїсЂдсЂёсѓІуиежЏєсѓ│сЃ╝сЃЅсѓњтЁЦтіЏ</small>
          </div>
          <div class="button-group">
            <button type="button" class="btn btn-primary" onclick="authenticateEdit()">
              уиежЏєсѓ│сЃ╝сЃЅсЂДуиежЏєжќІтДІ
            </button>
            <button type="button" class="btn btn-secondary" onclick="requestMagicLink()">
              уиежЏєсЃфсЃ│сѓ»сѓњсЃАсЃ╝сЃФсЂДжђЂС┐А
            </button>
          </div>
        </section>

        <!-- сЂћУЄфт«ЁСйЈТЅђсѓ╗сѓ»сѓисЃДсЃ│ -->
        <section id="householdSection" class="form-section" <?=mode==='edit' ? '' : 'style="display:none;"' ?>>
          <h2>­ЪЊЇ сЂћУЄфт«ЁСйЈТЅђ</h2>
          <div class="form-row">
            <div class="form-group col-md-4">
              <label for="postalCode">жЃхСЙ┐уЋфтЈи <span class="required">*</span></label>
              <input type="text" id="postalCode" class="form-control" placeholder="123-4567" maxlength="8" required
                value="<?= household ? household.postalCode : '' ?>">
              <button type="button" id="searchAddressBtn" class="btn btn-sm btn-secondary mt-1">СйЈТЅђТцюу┤б</button>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-4">
              <label for="prefecture">жЃйжЂЊт║юуюї <span class="required">*</span></label>
              <select id="prefecture" class="form-control" required>
                <option value="">жЂИТіъсЂЌсЂдсЂЈсЂасЂЋсЂё</option>
                <option value="тїЌТхижЂЊ">тїЌТхижЂЊ</option>
                <option value="жЮњТБ«уюї">жЮњТБ«уюї</option>
                <option value="т▓ЕТЅІуюї">т▓ЕТЅІуюї</option>
                <option value="т««тЪјуюї">т««тЪјуюї</option>
                <option value="уДІућ░уюї">уДІућ░уюї</option>
                <option value="т▒▒тйбуюї">т▒▒тйбуюї</option>
                <option value="удЈт│Хуюї">удЈт│Хуюї</option>
                <option value="УїетЪјуюї">УїетЪјуюї</option>
                <option value="ТаЃТюеуюї">ТаЃТюеуюї</option>
                <option value="уЙцждгуюї">уЙцждгуюї</option>
                <option value="тЪ╝ујЅуюї">тЪ╝ујЅуюї</option>
                <option value="тЇЃУЉЅуюї">тЇЃУЉЅуюї</option>
                <option value="ТЮ▒С║гжЃй">ТЮ▒С║гжЃй</option>
                <option value="уЦътЦѕтиЮуюї">уЦътЦѕтиЮуюї</option>
                <option value="Тќ░ТйЪуюї">Тќ░ТйЪуюї</option>
                <option value="т»їт▒▒уюї">т»їт▒▒уюї</option>
                <option value="уЪ│тиЮуюї">уЪ│тиЮуюї</option>
                <option value="удЈС║Ћуюї">удЈС║Ћуюї</option>
                <option value="т▒▒Тбеуюї">т▒▒Тбеуюї</option>
                <option value="жЋижЄјуюї">жЋижЄјуюї</option>
                <option value="т▓љжўюуюї">т▓љжўюуюї</option>
                <option value="жЮЎт▓Ауюї">жЮЎт▓Ауюї</option>
                <option value="ТёЏуЪЦуюї">ТёЏуЪЦуюї</option>
                <option value="СИЅжЄЇуюї">СИЅжЄЇуюї</option>
                <option value="Т╗ІУ│ђуюї">Т╗ІУ│ђуюї</option>
                <option value="С║гжЃйт║ю">С║гжЃйт║ю</option>
                <option value="тцДжўфт║ю">тцДжўфт║ю</option>
                <option value="тЁхт║Фуюї">тЁхт║Фуюї</option>
                <option value="тЦѕУЅ»уюї">тЦѕУЅ»уюї</option>
                <option value="тњїТГїт▒▒уюї">тњїТГїт▒▒уюї</option>
                <option value="ж│ЦтЈќуюї">ж│ЦтЈќуюї</option>
                <option value="т│ХТа╣уюї">т│ХТа╣уюї</option>
                <option value="т▓Ат▒▒уюї">т▓Ат▒▒уюї</option>
                <option value="т║Ѓт│Хуюї">т║Ѓт│Хуюї</option>
                <option value="т▒▒тЈБуюї">т▒▒тЈБуюї</option>
                <option value="тЙ│т│Хуюї">тЙ│т│Хуюї</option>
                <option value="ждЎтиЮуюї">ждЎтиЮуюї</option>
                <option value="ТёЏтфЏуюї">ТёЏтфЏуюї</option>
                <option value="жФўуЪЦуюї">жФўуЪЦуюї</option>
                <option value="удЈт▓Ауюї">удЈт▓Ауюї</option>
                <option value="СйљУ│ђуюї">СйљУ│ђуюї</option>
                <option value="жЋит┤јуюї">жЋит┤јуюї</option>
                <option value="уєіТюгуюї">уєіТюгуюї</option>
                <option value="тцДтѕєуюї">тцДтѕєуюї</option>
                <option value="т««т┤јуюї">т««т┤јуюї</option>
                <option value="ж╣┐тЁљт│Хуюї">ж╣┐тЁљт│Хуюї</option>
                <option value="Т▓ќуИёуюї">Т▓ќуИёуюї</option>
              </select>
            </div>
            <div class="form-group col-md-8">
              <label for="city">тИѓтї║ућ║ТЮЉ <span class="required">*</span></label>
              <input type="text" id="city" class="form-control" placeholder="ТефТхютИѓжЮњУЉЅтї║" required
                value="<?= household ? household.city : '' ?>">
            </div>
          </div>
          <div class="form-group">
            <label for="street">ућ║тљЇсЃ╗уЋфтю░сЃ╗тЈи <span class="required">*</span></label>
            <input type="text" id="street" class="form-control" placeholder="уЙјсЂЌсЂїСИў1-2-3" required
              value="<?= household ? household.street : '' ?>">
          </div>
          <div class="form-group">
            <label for="building">т╗║уЅЕтљЇсЃ╗жЃет▒ІуЋфтЈи</label>
            <input type="text" id="building" class="form-control" placeholder="РЌІРЌІсЃъсЃ│сѓисЃДсЃ│ 101тЈит«ц"
              value="<?= household ? household.building : '' ?>">
          </div>
        </section>

        <!-- С┐ЮУГиУђЁТЃЁта▒сѓ╗сѓ»сѓисЃДсЃ│ -->
        <section id="guardiansSection" class="form-section" style="display:none;">
          <h2>­ЪЉеРђЇ­ЪЉЕРђЇ­ЪЉДРђЇ­ЪЉд С┐ЮУГиУђЁТЃЁта▒</h2>
          <div id="guardiansList">
            <!-- С┐ЮУГиУђЁсЃЋсѓЕсЃ╝сЃасЂїтІЋуџёсЂФУ┐йтіасЂЋсѓїсѓІ -->
          </div>
          <button type="button" class="btn btn-success" onclick="addGuardian()">
            + С┐ЮУГиУђЁсѓњУ┐йтіа
          </button>
        </section>

        <!-- ућЪтЙњТЃЁта▒сѓ╗сѓ»сѓисЃДсЃ│ -->
        <section id="studentsSection" class="form-section" style="display:none;">
          <h2>­ЪЉеРђЇ­ЪјЊ ућЪтЙњТЃЁта▒</h2>
          <div id="studentsList">
            <!-- ућЪтЙњсЃЋсѓЕсЃ╝сЃасЂїтІЋуџёсЂФУ┐йтіасЂЋсѓїсѓІ -->
          </div>
          <button type="button" class="btn btn-success" onclick="addStudent()">
            + ућЪтЙњсѓњУ┐йтіа
          </button>
        </section>

        <!-- тѓЎУђЃТгё -->
        <section id="notesSection" class="form-section" style="display:none;">
          <h2>­ЪЊЮ тѓЎУђЃ</h2>
          <div class="form-group">
            <textarea id="notes" class="form-control" rows="3"
              placeholder="сЂЮсЂ«С╗ќсђЂсЂіС╝ЮсЂѕсЂЌсЂЪсЂёсЂЊсЂесЂїсЂѓсѓїсЂ░сЂћУеўтЁЦсЂЈсЂасЂЋсЂё"><?= household ? household.notes : '' ?></textarea>
          </div>
        </section>

        <!-- сЃАсЃЃсѓ╗сЃ╝сѓИУАеуц║ -->
        <div id="message" style="display:none;" class="alert"></div>

        <!-- жђЂС┐АсЃюсѓ┐сЃ│сѓ╗сѓ»сѓисЃДсЃ│ -->
        <section id="submitSection" class="form-section text-center" style="display:none;">
          <button type="submit" class="btn btn-primary btn-lg">уЎ╗жї▓тєЁт«╣сѓњуб║УфЇ</button>
        </section>
      </form>

      <!-- уб║УфЇућ╗жЮбсѓ╗сѓ»сѓисЃДсЃ│ -->
      <div id="confirmationSection" style="display:none;" class="fade-in">
        <h2 class="text-center mb-4">уЎ╗жї▓тєЁт«╣сЂ«уб║УфЇ</h2>
        <p class="text-center mb-4">С╗ЦСИІсЂ«тєЁт«╣сЂДуЎ╗жї▓сЂЌсЂЙсЂЎсђѓсѓѕсѓЇсЂЌсЂЉсѓїсЂ░сђїжђЂС┐АсЂЎсѓІсђЇсЃюсѓ┐сЃ│сѓњТі╝сЂЌсЂдсЂЈсЂасЂЋсЂёсђѓ</p>
        <div id="confirmationContent"></div>
        <div class="button-group mt-4 text-center">
          <button type="button" class="btn btn-secondary mr-3" onclick="handleBack()">С┐«ТГБсЂЎсѓІ</button>
          <button type="button" class="btn btn-primary" onclick="handleFinalSubmit()">жђЂС┐АсЂЎсѓІ</button>
        </div>
      </div>

      <!-- сЃГсЃ╝сЃЄсѓБсЃ│сѓ░УАеуц║ -->
      <div id="loading" style="display:none;" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="sr-only">Loading...</span>
        </div>
        <p class="mt-2">тЄдуљєСИГ...</p>
      </div>
    </main>
  </div>

  <?!= include('script'); ?>
</body>

</html>