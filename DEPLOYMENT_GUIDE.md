# Webアプリデプロイ手順

## ステップ3：Webアプリとしてデプロイ

### 前提条件
✅ Spreadsheet初期化完了
✅ Config.js設定完了
✅ 3つのシート（世帯マスタ、保護者、生徒）作成済み

---

### デプロイ手順

1. **GASエディタで「デプロイ」をクリック**
   - 右上の「デプロイ」ボタンをクリック
   - 「新しいデプロイ」を選択

2. **種類を選択**
   - 歯車アイコン（種類を選択）をクリック
   - 「ウェブアプリ」を選択

3. **デプロイ設定**
   - **説明:** `保護者メール登録システム v1.0`
   - **次のユーザーとして実行:** `自分`
   - **アクセスできるユーザー:** `全員`
   
4. **デプロイ実行**
   - 「デプロイ」ボタンをクリック
   - 権限の承認が必要な場合は承認
   
5. **デプロイURLを取得**
   - デプロイ完了後、表示されるURLをコピー
   - 例: `https://script.google.com/macros/s/AKfycby.../exec`

---

### アクセスURL

デプロイURLに`token`パラメータを追加：

```
https://script.google.com/macros/s/YOUR_DEPLOY_ID/exec?token=mebio-parent-reg-2025-k7m3x9p4
```

**このURLを保護者に配布します。**

---

### 動作確認

1. **新規登録テスト**
   - 上記URLにアクセス
   - 「新規登録」を選択
   - テストデータで登録
   - 確認メールが届くか確認
   - Spreadsheetにデータが保存されるか確認

2. **編集テスト**
   - 「登録内容を編集」を選択
   - メールアドレスと編集コードで認証
   - データが正しく読み込まれるか確認

3. **Magic Linkテスト**
   - 「編集リンクをメールで送信」をクリック
   - メールが届くか確認
   - リンクから編集画面にアクセスできるか確認

---

### トラブルシューティング

#### エラー：「アクセスが拒否されました」
- URLにtokenパラメータが含まれているか確認
- tokenの値がConfig.jsと一致しているか確認

#### エラー：「受付期間外です」
- Config.jsの`ALLOW_START_DATE`と`ALLOW_END_DATE`を確認
- 現在の日付が期間内か確認

#### メールが届かない
- Config.jsの`ADMIN_EMAIL`が正しいか確認
- Gmailの送信制限に達していないか確認（1日100通まで）

---

## デプロイ完了後

デプロイURLを教えてください。
簡単な動作確認を行います。
